<!doctype html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no,email=no" name="format-detection">
    <title>new推荐</title>
    <link rel="stylesheet" href="css/base.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
        .nav .i4 {
            background-position: -279px 0;
        }
        .nav .i2 {
            background: url("images/hot2.png") no-repeat;
            -webkit-background-size: contain;
            background-size: contain;
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="filter-bar">
        <div class="bd">
            <!--默认-->
            <a href="#">最新<i class="icon icon1"></i></a>

            <!--将序-->
            <!--<a href="#" class="rv">最新<i class="icon icon1"></i></a>-->

            <span class="v-line"></span>

            <!--默认-->
            <!--<a href="#">价格<i class="icon icon2"></i></a>-->

            <!--将序-->
            <!--<a href="#" class="rv">价格<i class="icon icon2"></i></a>-->

            <!--升序-->
            <a href="#" class="od">价格<i class="icon icon2"></i></a>

            <span class="v-line"></span>

            <!--默认-->
            <a href="#">销量<i class="icon icon1"></i></a>

            <!--将序-->
            <!--<a href="#" class="rv">销量<i class="icon icon1"></i></a>-->

            <!--升序-->
            <!--<a href="#" class="od">销量<i class="icon icon1"></i></a>-->

            <span class="v-line"></span>
            <a href="#">分类<i class="icon type"></i></a>
        </div>
    </div>
    <!--头部导航-->
    <div class="recom-content bgf clearfix">
        <div class="content-left bgf">
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第一个商品</p>
                    <p class="shop-intro tworow">的撒开了打都晒大SAV能理解二维你看了大神</p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第二个商品</p>
                    <p class="shop-intro tworow">第二个付款了</p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第三个商品</p>
                    <p class="shop-intro tworow">的撒开了家空链 </p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第四个商品</p>
                    <p class="shop-intro tworow">的撒开了家空链接我就去分开来的就是发 </p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第五个商品</p>
                    <p class="shop-intro tworow">的撒开了家空链接我就去分开来的就是发 </p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
            <div class="adiv">
                <a href="">
                    <div class="posi-img">
                        <img src="imagestest/1.png" alt="" width="100%">
                        <span class="pos-up">
                    	    <span class="text"><em>上新</em></span>
                    	    <i class="bg"></i>
                         </span>
                        <span class="pos-down">
                            <span class="tag"><em>火爆</em><i class="bg"></i></span>
						    <span class="tag"><em>限时优惠</em><i class="bg"></i></span>
                        </span>
                    </div>
                    <p class="list-name ellip">第6个商品</p>
                    <p class="shop-intro tworow">的撒开了家空链接我就去分开来的就是发 </p>
                    <div class="price">
                        <span class="price-num"> <em>¥</em>128</span>
                        <span class="original"> ￥500</span>
                        <span class="dis">7.5 折</span>
                    </div>
                </a>
            </div>
        </div>
    </div>
    <!--商品-->
    <div class="footer">
        <ul class="nav">
            <li><a href="ladies-index.html"><i class="i1"></i>
                <p>精选</p></a></li>
            <li><a href="" class="active"><i class="i2"></i>
                <p>最新</p></a></li>
            <li><a href="shopCart.html"><i class="i3">
                <span class="num2">30</span>
            </i>
                <p>购物车</p></a></li>
            <li><a href="my.html"><i class="i4"></i>
                <p>我的</p></a></li>
        </ul>
    </div>
    <!--底部导航-->
    <div class="shade">
        <div class="size-wrap">
            <ul class="shop-info clearfix">
                <li class="fleft"><img src="imagestest/size-img.png" alt="" width="100%"></li>
                <li class="fleft">
                    <p class="shop-name ellip">【不过时的条纹】时尚衬衫翻领露肩装 简洁的条纹图案</p>
                    <p><span>￥</span><span class="size-price">128</span></p>
                    <p>请选择规格</p>
                </li>
                <img src="images/close2.png" alt="" width="14" class="close2">
            </ul>
            <!--商品信息-->
            <form action="">
                <div class="color">
                    <span>颜色</span><span>白</span><span>红</span><span>绿色</span><span>黑色</span>
                </div>
                <div class="size">
                    <p class="title">尺码</p>
                    <div class="size-choose clearfix">
                        <a href="###">s</a><a href="###">M</a><a href="###">L</a><a href="###">XL</a><a href="###">XXL</a><a href="###">3XL</a>
                    </div>
                </div>
                <!--尺码选择-->
                <div class="num clearfix">
                    <p class="title">数量</p>
                    <div class="box">
                        <div class="inpbox mt10 clearfix">
                            <input class="min" name="" type="button" value="-"/>
                            <input class="text_box" name="" type="text" value="1"/>
                            <input class="add" name="" type="button" value="+"/>
                        </div>
                        <span class="limit" style="display: inline-block;">(每个ID限购5件)</span>

                    </div>
                </div>
                <input type="submit" value="加入购物车" class="buy">
                <!--数量选择-->
            </form>
        </div>
    </div>
    <!--选尺码-->
    <div class="sidebar-mask">
        <div class="sidebar bgf clearfix">
            <h3>全部分类</h3>
            <a href="">
                <img src="images/t_shirt.png" alt="" width="44" height="44">
                <p class="f11">精选T恤</p>
            </a>
            <a href="">
                <img src="images/blouse.png" alt="" width="44" height="44">
                <p class="f11">新款衬衫</p>
            </a>
            <a href="">
                <img src="images/pants.png" alt="" width="44" height="44">
                <p class="f11">连衣裙</p>
            </a>
        </div>
    </div>
    <!--侧边栏-->
</div>
<script src="js/jquery-3.1.1.min.js"></script>
<script src="js/recom.js"></script>
<script>
    /*
     原理：1.把所有的li的高度值放到数组里面
     2.第一行的top都为0
     3.计算高度值最小的值是哪个li
     4.把接下来的li放到那个li的下面
     */
    function wang() {//定义成函数便于调用
        var contleft = $('.content-left');//父级
        var li = $(".adiv");//这里是区块名称
        var margin = 0;//这里设置间距
        var li_W = li[0].offsetWidth + margin;//取区块的实际宽度（包含间距，这里使用源生的offsetWidth函数，不适用jQuery的width()函数是因为它不能取得实际宽度，例如元素内有pandding就不行了）
        var h = [];//记录区块高度的数组
        var n = 2//窗口的宽度除以区块宽度就是一行能放几个区块
        var pos = [];
        for (var i = 0; i < li.length; i++) {//有多少个li就循环多少次
            li_H = li[i].offsetHeight;//获取每个li的高度
            if (i < n) {//n是一行最多的li，所以小于n就是第一行了
                h[i] = li_H;//把每个li放到数组里面
                li.eq(i).css("top", 0);//第一行的Li的top值为0
                li.eq(i).css("left", i * li_W);//第i个li的左坐标就是i*li的宽度
            }
            else {
                min_H = Math.min.apply(null, h);//取得数组中的最小值，区块中高度值最小的那个
                minKey = getarraykey(h, min_H);//最小的值对应的指针
//                minKey=h.indexOf(min_H)
                console.log(minKey, h, li_H)

                h[minKey] += li_H + margin;//加上新高度后更新高度值
                li.eq(i).css("top", min_H + margin);//先得到高度最小的Li，然后把接下来的li放到它的下面
                li.eq(i).css("left", minKey * li_W);	//第i个li的左坐标就是i*li的宽度
//                pos[min_H] += li.eq(i).outerHeight();
            }
        }
        var maxh = Math.max.apply({}, h) + 10;
        contleft.css('height', maxh);    //设置最外容器的高以适应内容的变化
    }

    /* 使用for in运算返回数组中某一值的对应项数(比如算出最小的高度值是数组里面的第几个) */
    function getarraykey(s, v) {
        for (k in s) {
            if (s[k] == v) {
                return k;
            }
        }
    }

    //    window.setTimeout(function(){$(".content-left").css({"height":$("body")[0].scrollHeight+"px"})},500);
    //    这里一定要用onload，因为图片不加载完就不知道高度值

    window.onload = function () {
        wang();
    };
    window.onresize = function () {
        wang();
    };
    $('.clatxt').on('click', function () {
        $('.sidebar-mask').animate({"right": 0}, 500)
    });
    $('.sidebar-mask').on('click', function () {
        $(this).animate({"right": "-100%"}, 500)
    });
    $('.sidebar').click(function (even) {
        even.stopPropagation()
    });
    //    侧边栏
</script>
</body>
</html>