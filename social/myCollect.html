<!DOCTYPE html>
<html lang="zh-cn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <meta content="telephone=no,email=no" name="format-detection">
    <title>我的收藏</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="stylesheet" href="../css/style.css">
</head>
<body class="my-collect">
<header class="head clearfix">
    <span class="fleft">收藏商品 12 件</span>
    <span class="fright">编辑</span>
</header>
<div class="tab-content collect-edit">
    <section class="tab-pane" style="display: block;">
        <ul class="tab-pane-list">
            <li class="goods-item">
                <span class="check-btn"></span>
                <img src="../imagestest/shop2.png" class="goods-img">
                <div class="goods-info">
                    <p>明星baby娜扎同款包包链条包简约单肩斜跨新款小方包真皮小
                        迷你女包</p>
                    <p><span>￥188.90</span> <span class="cart fr"></span></p>
                </div>
            </li>
            <li class="goods-item">
                <span class="check-btn"></span>
                <img src="../imagestest/shop2.png" class="goods-img">
                <div class="goods-info">
                    <p>明星baby娜扎同款包包链条包简约单肩斜跨新款小方包真皮小
                        迷你女包</p>
                    <p><span>￥188.90</span> <span class="cart fr"></span></p>
                </div>
            </li>
        </ul>
    </section>
</div>
<footer class="edit-handle" style="display: none;">
    <div class="edit-handle-foot">
        <div class="l">
            <span class="choose-all"></span>全选
            <span class="choose-num">选中 <b>0</b> 件</span>
        </div>
        <button class="r">取消收藏</button>
    </div>
</footer>
<script src="../js/jquery-3.1.1.min.js"></script>
<script>
    (function ($) {
        var editBtn = $('.head .fright'),
            checkOne = $('.check-btn'),
            checkAll = $('.edit-handle-foot .choose-all'),
            chooseNum = 0,
            a = true;
        editBtn.on('click', function () {  //编辑按钮点击事件
            checkOne.toggle();
            $('.edit-handle').toggle();
            if (a) {
                $(this).text('完成');
                a = !a;
            } else {
                $(this).text('编辑');
                a = !a;
            }
        });
        checkOne.on('click', function () {   //单个商品选择
            $(this).toggleClass('active');
            changNum();
        });
        checkAll.on('click', function () {  //全选
            $(this).toggleClass('active');
            if ($(this).hasClass('active')) {
                checkOne.addClass('active')
            } else {
                checkOne.toggleClass('active');
            }
            changNum();
        });

        function changNum() {  //改变数字
            chooseNum = $('.goods-item .active').length;
            $('.choose-num b').text(chooseNum);
            if (chooseNum === $('.goods-item').length) {
                checkAll.addClass('active');
            } else {
                checkAll.removeClass('active');
            }
        }

        $('.edit-handle-foot .r').on('click', function () {  //取消收藏
            checkOne.each(function (idx) {
                if ($(this).hasClass('active')) {
                    $(this).parent('.goods-item').remove();
                }
            })
        });
    })(jQuery)
</script>
</body>
</html>